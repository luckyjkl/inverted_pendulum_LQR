clear all

M = 1;      %小车质量
m = 1;      %摆杆质量
g = 9.8;    %重力加速度
L = 2;      %摆杆长度

l = 0.5 * L;
J = 1 / 12 * m * L^2;   %均质摆杆转动惯量

A_23 = -m^2 * l^2 * g / (J * (M + m) + M * m * l^2);
A_43 = (M + m) * m * g * l / (J * (M + m) + M * m * l^2);

B_2 = (J + m * l^2) / (J * (M + m) + M * m * l^2);
B_4 = -m * l / (J * (M + m) + M * m * l^2);

A = [0 1 0 0;0 0 A_23 0; 0 0 0 1; 0 0 A_43 0];
B = [0 B_2 0 B_4]';

Q = [100 0 0 0;
    0 1 0 0;
    0 0 100 0;
    0 0 0 1];
R = 10;

K = lqr(A, B, Q, R)

